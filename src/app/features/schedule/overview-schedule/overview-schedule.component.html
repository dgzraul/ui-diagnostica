<div>  
  <div class="row" *ngIf="selectedDate">
    <div class="col s12">
      <p>Selected Date and Time: {{ selectedDate.setLocale('es').toFormat('MMMM EEEE d yyyy') }}</p>
    </div>
  </div>

  <div class="row">
    <!-- Hours -->
    <div class="col s12 m7">
      <div class="hour-list-container" #container>
        <ul class="collection">
          <li class="collection-item" *ngFor="let hour of hours; let i = index" [ngClass]="{ 'highlighted': hour.isInRange }" (click)="openFormModal(hour.hour)">
            <small class="hour-label" > {{ hour.hour }}</small>
          </li>
        </ul>

        <ng-container *ngFor="let range of timeRanges; let i = index">
          <div class="highlight-square" 
            [style.top.%]="getSquareTopPercentage(range)" 
            [style.height.%]="getSquareHeightPercentage(range)" 
            [style.width.%]="getSquareWidthPercentage(range, container)" 
            [style.left.%]="getSquareLeftPercentage(range, container, i)">
              <a style="color: #fff;" href=""> {{range.label}}  {{range.start.toFormat('hh:mm a')}} - {{range.end.toFormat('hh:mm a')}}</a>
          </div>
        </ng-container>
      </div>
    </div>
    
    <!-- Calendar -->
    <div class="col s12 m4 offset-m1">
      <app-calendar (selectedDateChange)="selectDateChange($event)"> </app-calendar>
    </div>
  </div>

  <!-- Modal -->
  <div id="formModal" class="modal">
    <form [formGroup]="form" (ngSubmit)="submit($event)">
      <div class="modal-content">
        <h4></h4>

        <!-- label -->
        <div class="row">
          <div class="col s12 input-container">
            <label for="label"> Titulo del evento </label>
            <input type="text" name="label" id="label" formControlName="label" class="browser-default"
              [class.input-invalid]="IOLabel?.dirty && IOLabel?.invalid">
          
            <ng-container *ngIf="IOLabel?.dirty">
              <span *ngIf="IOLabel?.hasError('required')"> Este campo es obligatorio </span>
            </ng-container>	
          </div>
        </div>

         <!-- start -->
         <div class="row">
          <div class="col s12 input-container">
            <label for="start"> Hora inicio </label>
            <input type="text" name="start" id="start" formControlName="start" class="browser-default"
              [class.input-invalid]="IOStart?.dirty && IOStart?.invalid">
          
            <ng-container *ngIf="IOStart?.dirty">
              <span *ngIf="IOStart?.hasError('required')"> Este campo es obligatorio </span>
            </ng-container>	
          </div>
        </div>

        <!-- start -->
        <div class="row">
          <div class="col s12 input-container">
            <label for="end"> Hora final </label>
            <input type="text" name="end" id="end" formControlName="end" class="browser-default"
              [class.input-invalid]="IOEnd?.dirty && IOEnd?.invalid">
          
            <ng-container *ngIf="IOEnd?.dirty">
              <span *ngIf="IOEnd?.hasError('required')"> Este campo es obligatorio </span>
            </ng-container>	
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="submit" class="btn waves-effect waves-light" (click)="submit($event)">Guardar</button>
      </div>
    </form>
  </div>
</div>
